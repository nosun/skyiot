# 管理后台开发

## 完善
- 后台设备列表，用户列表每页显示数量修改为50条，隐藏之前对单页数据的分页。 完成
- 用户反馈页面，列表页面等，UI跟其他页面进行统一。 完成

## bug
- 解决首页数据缺失时报错的问题。 完成

## 优化
- 上传文件方式的方式修改（找一种明显的带有进度条的插件看能否优化）。
- 用户权限控制部分

## 二次开发
管理后台，侧重功能性，要求功能完整，界面简洁，易用性好。

### 首页
- 首页是动态的，不同的角色进入首页看到的内容是不同的。
- 首页呈现用户关心的摘要信息
	- 公告
	- 当前系统运行情况：
	- 当前用户情况
	- 当前设备情况
	- 近期用户增量曲线
	- 近期设备增量曲线
	- 快捷方式

### 系统管理
#### 系统设置（高，低）
设置什么？配置项，比如每页最大的显示数量，功能的开关，这些设置写入数据库，或者生成一个配置文件。
设置电子邮件服务，在系统出现故障的时候，发短信以及发送电子邮件。

- 报警功能
不过可以考虑，通过阿里云的运维服务来处理，需要调研。

	- 邮件通知：增加邮件服务
	- 短信通知：增加短信服务
	- 增加事件
		- 当服务不正常时，通知运维人员
		- 增加服务检测功能：每5分钟检测一次服务

#### 计划任务 （高，低）
计划任务的管理界面，可以终止任务，可以添加任务，可以设定任务的执行周期，并查看任务执行的情况。

#### 任务队列 （高，低）
后期可能会有这样的需求，如果计划任务多了，就会遇到这样的情况，同一时刻执行的任务多了，会不会执行不过来，这个时候需要有任务队列的概念。

#### 服务管理 （高，低）

- TCP服务管理：TCP服务是系统的重要服务，该服务运行是否正常，有哪些指标可以作为可靠的依据，需要定期侦测。
- 系统状态管理：操作系统的运行状况，这个东西阿里云已经有，但是否可以有接口获取呢？如果没有，是否能自己做。
- Mqtt成功率：Mqtt监控，主要是看推送到达的成功率，如何统计呢？还是个问题。
- Mysql，Nginx，Php-fpm，这些都是常规服务，一般来说没什么问题。
- 错误日志：日志有很多层面，这里主要指的是系统服务产生的错误日志，对日志进行的分析，比如Nginx error，php error，tcp服务的error，要对这些错误日志进行统计分析，了解其情况，修复bug。

#### 用户反馈 （低，低）

- 厂家的工作人员对管理员提的建议与意见

#### 公告 (低，低)

- 系统管理员对厂家发送的通知，公告

#### 日志

### 系统运营 (高，高)
- 用户（添加菜单）
- 角色（添加菜单）
- 权限（添加菜单）
- 厂家：目前尚未做
- 产品：完善
- 模块：完善
- 授权：(添加菜单)
- APP：(添加菜单)

### 产品管理(高，高)
产品，各种各样的，需要分类吧，不同的类型，模板估计不一样，亦或者说，每个产品都可能需要自己的模板，比较头疼。

- 产品设置：不同的厂家设置不同的信息
	- 帮助文档
	- 分享页面
	- 下载页面
	- 关于页面
- 软件版本：
	- 版本发布信息
- 固件版本：
	- 固件发布信息

### 产品运营 (高，高)
比较通用的功能就是，用户反馈，以及回复功能，不过还很简陋。

### 设备管理
#### 设备列表（高，高）  
- 通用列表
- 异常设备
#### 设备控制（高，高）
- 给设备发送指令
- 固件升级
- 特殊指令：不同的设备有不同的指令
#### 设备详情（高，高）
- 显示设备的当前状态
- 显示设备的近期状态曲线
- 显示设备的控制连接
- 显示设备的绑定关系
#### 异常设备处理（高，高）
- 设备异常信息
- 设备异常处理流程

### 用户管理（高，高）
- 用户列表
- 用户详情
- 用户增量图表
- 用户总量图表
- 单个用户行为日志
- 用户行为分析	

### 数据分析（高，高）
数据分析是相对比较独立的一个单元。